import{d as E,u as M,m as z,n as m,r as C,s as w,o as F,p as b,q as g,v as V,e as a,b as r,c as h,f as s,w as i,x as d,y as P,z as N,A as p,F as G,h as Q,t as _,i as v,B as T,C as H,D as J,G as D}from"./index-f1976898.js";const K={key:0,class:"relative cart"},O={class:"cart__list bg-gray-200 pb-4"},W={class:"flex-1 flex items-center"},X=s("div",{class:"w-full"}," 商品 ",-1),Y=s("div",{class:"w-full"}," 單價 ",-1),Z=s("div",{class:"w-full"}," 數量 ",-1),I=s("div",{class:"w-20"},null,-1),ee=[X,Y,Z,I],se=["onUpdate:modelValue"],te=["src"],oe={class:"w-full flex justify-between items-center"},le={class:"text-base"},ne=["onClick"],ie={class:"w-full text-base"},ce={class:"w-20"},ae=["onClick"],ue={class:"flex flex-col items-end p-2"},de={class:"text-white mb-4 text-base"},re={key:1,class:"h-full"},he={class:"flex flex-col justify-center items-center h-full"},_e=s("p",{class:"text-gray-300 text-3xl mb-4"},"購物車是空的",-1),ve=s("span",{class:"hover:translate-x-3"},">",-1),fe=s("span",null,"點此前往選購",-1),ye=E({__name:"CartView",setup(pe){const S=M(),U=z(),q=m(),{minusProduct:xe,removeProduct:x,setProduct:$}=m(),l=C(S.mobile),{isLogin:A}=w(U),B=C(null);F(()=>{A.value||b.push({name:"login"}),n.value.forEach(e=>{e.isCheck=!1})});const{cart:n}=w(q),k=g(()=>({count:n.value.filter(e=>e.isCheck).length,totalPrice:n.value.filter(e=>e.isCheck).reduce((e,t)=>e+t.price*t.quantity,0)})),L=(e,t)=>{const c=new D(e.isCheck,e.productId,e.name,e.price,e.quantity,e.store,e.onSell,e.inventory,e.image,e.id);t===0?x(c):(c.quantity=t,$(c))},y=e=>{const t=new D(e.isCheck,e.productId,e.name,e.price,e.quantity,e.store,e.onSell,e.inventory,e.image,e.id);x(t)},R=()=>{n.value.some(t=>t.isCheck)?b.push({name:"cartCheckout"}):alert("請先勾選商品，再進行結帳")},f=g({get:()=>n.value.every(e=>e.isCheck),set:e=>{n.value.forEach(t=>{t.isCheck=e})}});return(e,t)=>{const c=V("font-awesome-icon"),j=V("RouterLink");return a(n).length?(r(),h("div",K,[s("div",O,[s("div",{class:i(["flex items-center cartItem",[l.value?"px-2 py-1":"px-6 py-4"]])},[s("div",{class:i([l.value?"w-5":"w-10"])},[d(s("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>N(f)?f.value=o:null),type:"checkbox"},null,512),[[P,a(f)]])],2),s("div",{class:i(["w-20 flex-none",[l.value?"mr-0":"mr-10"]])},null,2),d(s("div",W,ee,512),[[p,!l.value]])],2),(r(!0),h(G,null,Q(a(n),o=>(r(),h("div",{class:"flex items-center cartItem",key:o.productId},[s("div",{class:i([l.value?"px-2 py-1":"px-6 py-4"])},[d(s("input",{"onUpdate:modelValue":u=>o.isCheck=u,type:"checkbox"},null,8,se),[[P,o.isCheck]])],2),s("div",{class:i(["w-20 h-20 flex-none",[l.value?"mr-0":"mr-10"]])},[s("img",{src:o.image?o.image:a(H),alt:"",class:"object-contain w-full h-full"},null,8,te)],2),s("div",{class:i(["flex-1 flex items-center",{"flex-col":l.value}])},[s("div",oe,[s("div",le,_(o.name),1),d(s("div",null,[s("button",{class:"p-2",type:"button",onClick:u=>y(o)},[v(c,{icon:"fa-solid fa-trash"})],8,ne)],512),[[p,l.value]])]),s("div",ie," $"+_(o.price),1),s("div",{class:i(["w-full",[l.value?"h-10":"h-14"]])},[v(J,{"model-value":o.quantity,"onUpdate:modelValue":u=>L(o,u),"is-show-button":!0,"min-value":1,"max-value":o.inventory},null,8,["model-value","onUpdate:modelValue","max-value"])],2),d(s("div",ce,[s("button",{class:"p-2",type:"button",onClick:u=>y(o)},[v(c,{icon:"fa-solid fa-trash"})],8,ae)],512),[[p,!l.value]])],2)]))),128))]),s("div",{ref_key:"cartCheckout",ref:B,class:"cart__checkout sticky bottom-0 left-0 w-full bg-gray-700"},[s("div",ue,[s("div",de," 總金額（共 "+_(a(k).count)+" 種商品）：$ "+_(a(k).totalPrice),1),s("button",{type:"button",class:"rounded px-3 py-1 bg-white",onClick:R}," 結帳 ")])],512)])):(r(),h("div",re,[s("div",he,[_e,v(j,{class:"text-2xl border-2 rounded-2xl bg-gray-600 text-white p-2",to:{path:"/"}},{default:T(()=>[ve,fe]),_:1})])]))}}});export{ye as default};
